<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nosso EspaÃ§o</title>

  <link rel="stylesheet" href="style.css" />
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#667eea" />
</head>

<body>
  <!-- LOGIN -->
  <div id="loginBox">
    <h2>Entrar</h2>
    <input type="email" id="email" placeholder="Email" autocomplete="email" />
    <input type="password" id="senha" placeholder="Senha" autocomplete="current-password" />
    <button onclick="login()">Entrar</button>
    <p id="statusMsg" style="margin-top:12px; font-size:14px; opacity:.85;"></p>
  </div>

  <!-- APP -->
  <div id="app" style="display:none;">

    <!-- TOPBAR GLOBAL -->
    <div class="topBar">
      <h1 id="tituloTopBar">Nosso EspaÃ§o</h1>

      <div class="topBarAcoes">
        <button class="btnSecundario" onclick="irPara('home')">ğŸ  Home</button>
        <button class="btnSecundario" onclick="logout()">Sair</button>
      </div>
    </div>

    <!-- =====================
         TELA HOME (MENU)
    ====================== -->
    <div id="telaHome" class="tela">
      <section class="cardHero">
        <h2>Bem-vindos ao nosso cantinho ğŸ’œ</h2>
        <p style="margin:0; opacity:.85;">
          Seu espaÃ§o exclusivo de vocÃªs dois: finanÃ§as, jogos, cinema e nossa leitura diÃ¡ria.
        </p>
      </section>

      <section>
        <h2>Escolha uma Ã¡rea</h2>

        <div class="gridMenu">
          <button class="btnMenu" onclick="irPara('financeiro')">
            <div class="btnMenuIcon">ğŸ’°</div>
            <div class="btnMenuTexto">
              <strong>Nosso Controle Financeiro</strong>
              <span>Entradas, saÃ­das e vencimentos</span>
            </div>
          </button>

          <!-- BÃBLIA -->
          <button class="btnMenu" onclick="irPara('biblia')">
            <div class="btnMenuIcon">ğŸ“–</div>
            <div class="btnMenuTexto">
              <strong>BÃ­blia (Checklist)</strong>
              <span>1 versÃ­culo por dia, separados</span>
            </div>
          </button>

          <!-- ğŸ’Œ CARTINHAS -->
          <button class="btnMenu" onclick="irPara('cartinhas')">
            <div class="btnMenuIcon">ğŸ’Œ</div>
            <div class="btnMenuTexto">
              <strong>Para vocÃª ğŸ’Œ</strong>
              <span>Cartinhas surpresa (com data)</span>
            </div>
          </button>

          <button class="btnMenu" onclick="irPara('jogos')">
            <div class="btnMenuIcon">ğŸ®</div>
            <div class="btnMenuTexto">
              <strong>Jogos</strong>
              <span>Jogar juntos em tempo real</span>
            </div>
          </button>

          <button class="btnMenu" onclick="irPara('cinema')">
            <div class="btnMenuIcon">ğŸ¬</div>
            <div class="btnMenuTexto">
              <strong>Cinema</strong>
              <span>Filmes + sÃ©ries, sorteio e nota</span>
            </div>
          </button>
        </div>
      </section>
    </div>

    <!-- =====================
         TELA FINANCEIRO
    ====================== -->
    <div id="telaFinanceiro" class="tela" style="display:none;">

      <section class="cardVoltar">
        <button class="btnVoltar" onclick="irPara('home')">â¬…ï¸ Voltar</button>
      </section>

      <!-- MÃŠS -->
      <section>
        <h2>ğŸ—“ï¸ MÃªs</h2>
        <input id="mesRef" type="month" />
      </section>

      <!-- RESUMO -->
      <section>
        <h2>Resumo do MÃªs</h2>

        <p>Total de Entradas: R$ <span id="totalEntradas">0.00</span></p>
        <p>Total de SaÃ­das: R$ <span id="totalSaidas">0.00</span></p>
        <p><strong>Saldo Final: R$ <span id="saldoFinal">0.00</span></strong></p>

        <div class="acoesResumo">
          <button onclick="ativarNotificacoes()">Ativar NotificaÃ§Ãµes</button>
          <button onclick="testarNotificacao()">Testar NotificaÃ§Ã£o</button>
        </div>
      </section>

      <hr />

      <!-- ENTRADAS -->
      <section>
        <h2>Entradas</h2>
        <button onclick="adicionarEntrada()">Adicionar Entrada</button>
        <ul id="listaEntradas"></ul>
      </section>

      <hr />

      <!-- VENCIMENTOS -->
      <section>
        <h2>ğŸ“… Vencimentos</h2>
        <button onclick="adicionarVencimento()">Adicionar Vencimento</button>
        <ul id="listaVencimentos"></ul>
      </section>

      <!-- SAÃDAS -->
      <section>
        <h2>SaÃ­das</h2>
        <button onclick="adicionarSaida()">Adicionar SaÃ­da</button>
        <ul id="listaSaidas"></ul>
      </section>
    </div>

    <!-- =====================
         TELA BÃBLIA
    ====================== -->
    <div id="telaBiblia" class="tela" style="display:none;">

      <section class="cardVoltar">
        <button class="btnVoltar" onclick="irPara('home')">â¬…ï¸ Voltar</button>
      </section>

      <div class="bibleBookStage">
        <div class="bibleAmbientGlow"></div>

        <div class="biblePaper" id="biblePaper">
          <div class="bibleBookmark" aria-hidden="true"></div>

          <div class="bibleGoldSeal" id="bibGoldSeal" style="display:none;">
            ğŸ… Leitura completa (os dois)
          </div>

          <div class="bibleHeader">
            <div class="bibleDayPill">
              <span class="bibleDayIcon">ğŸ“œ</span>
              <strong id="bibDiaLabel">Carregando...</strong>
            </div>

            <div class="bibleHeaderRight">
              <span class="bibleTinyHint">PÃ¡gina de leitura</span>
            </div>
          </div>

          <div class="bibleTitleArea">
            <h2 class="bibleBookTitle" id="bibBookTitle">â€”</h2>

            <p class="bibleRefLine">
              <span class="bibleRefLabel">ReferÃªncia</span>
              <span class="bibleRefValue" id="bibRef">â€”</span>
            </p>

            <p class="bibleDisclaimer">
              (O texto nÃ£o aparece aqui por direitos autorais de traduÃ§Ãµes â€” vocÃªs leem no app/BÃ­blia que preferirem ğŸ’œ)
            </p>
          </div>

          <div class="bibleActionsRow">
            <button class="biblePageBtn biblePageBtnGhost" onclick="anteriorVersiculoBiblia()" title="Anterior">â®ï¸</button>

            <div class="bibleActionsCenter">
              <button class="biblePrimaryInk" onclick="marcarLeituraBiblia(true)">âœï¸ Assinar leitura</button>
              <button class="bibleSecondaryInk" onclick="marcarLeituraBiblia(false)">â†©ï¸ Remover assinatura</button>

              <button class="bibleSoundBtn" id="bibSoundBtn" onclick="toggleSomBiblia()">ğŸ”Š Som: ON</button>
            </div>

            <button class="biblePageBtn biblePageBtnNext" onclick="proximoVersiculoBiblia()" title="PrÃ³ximo">â­ï¸</button>
          </div>

          <div class="bibleSeals">
            <div class="bibleSeal">
              <div class="bibleSealTop">
                <span class="bibleSealEmoji">ğŸ‘¤</span>
                <strong>Ash</strong>
              </div>
              <div class="bibleSealStatus" id="bibStatusEu">â€”</div>
            </div>

            <div class="bibleSeal">
              <div class="bibleSealTop">
                <span class="bibleSealEmoji">ğŸ‘¤</span>
                <strong>Deh</strong>
              </div>
              <div class="bibleSealStatus" id="bibStatusEla">â€”</div>
            </div>
          </div>

          <div class="bibleFooterNote">
            <span class="bibleFooterDot">â€¢</span>
            <span id="bibFooterDia">Dia â€”</span>
            <span class="bibleFooterDot">â€¢</span>
            Sincronizado pros dois ao virar a pÃ¡gina
            <span class="bibleFooterDot">â€¢</span>
          </div>
        </div>
      </div>
    </div>

    <!-- =====================
         TELA CARTINHAS ğŸ’Œ
    ====================== -->
    <div id="telaCartinhas" class="tela" style="display:none;">

      <section class="cardVoltar">
        <button class="btnVoltar" onclick="irPara('home')">â¬…ï¸ Voltar</button>
      </section>

      <section class="loveHero">
        <h2>ğŸ’Œ Para vocÃª</h2>
        <p style="margin:0; opacity:.85;">
          Cartinhas surpresa entre <strong>Ash</strong> e <strong>Deh</strong>. DÃ¡ pra trancar e abrir sÃ³ na data ğŸ’œ
        </p>
      </section>

      <section class="loveCompose">
        <h2>Escrever cartinha</h2>

        <div class="loveGrid">
          <div class="loveField">
            <label for="loveTo">Para</label>
            <select id="loveTo">
              <option value="deh">Deh</option>
              <option value="ash">Ash</option>
            </select>
            <small class="loveHint">O app jÃ¡ coloca o â€œparaâ€ como o outro automaticamente.</small>
          </div>

          <div class="loveField">
            <label for="loveWhen">Abrir</label>
            <select id="loveWhen" onchange="cartinhasTrocarModoData()">
              <option value="now">Agora</option>
              <option value="tomorrow">AmanhÃ£</option>
              <option value="date">Em uma data</option>
            </select>

            <div id="loveDateWrap" style="display:none; margin-top:10px;">
              <label for="loveDate">Data</label>
              <input id="loveDate" type="date" />
              <small class="loveHint">A cartinha fica trancada atÃ© essa data.</small>
            </div>
          </div>
        </div>

        <div class="loveField" style="margin-top:12px;">
          <label for="loveText">Sua mensagem</label>
          <textarea id="loveText" rows="6" placeholder="Escreve algo bem lindoâ€¦ ğŸ’œ"></textarea>
          <div class="loveRow">
            <span class="loveMini" id="loveMeLabel">VocÃª: â€”</span>
            <button onclick="cartinhasEnviar()" class="loveSendBtn">ğŸ’Œ Enviar cartinha</button>
          </div>
        </div>
      </section>

      <section>
        <h2>Recebidas</h2>
        <div id="loveInbox" class="loveList">
          <p style="margin:0; opacity:.75;">Carregandoâ€¦</p>
        </div>
      </section>

      <section>
        <h2>Enviadas</h2>
        <div id="loveSent" class="loveList">
          <p style="margin:0; opacity:.75;">Carregandoâ€¦</p>
        </div>
      </section>

      <div id="loveModal" class="loveModal" style="display:none;" role="dialog" aria-modal="true">
        <div class="loveModalBackdrop" onclick="cartinhasFecharModal()"></div>
        <div class="loveModalCard">
          <div class="loveModalTop">
            <strong id="loveModalTitle">ğŸ’Œ Cartinha</strong>
            <button class="loveModalClose" onclick="cartinhasFecharModal()">âœ–</button>
          </div>

          <div class="loveModalMeta" id="loveModalMeta">â€”</div>
          <div class="loveModalBody" id="loveModalBody">â€”</div>

          <div class="loveModalActions">
            <button class="btnSecundario" onclick="cartinhasFecharModal()">Fechar</button>
          </div>
        </div>
      </div>

    </div>

    <!-- =====================
         TELA JOGOS
    ====================== -->
    <div id="telaJogos" class="tela" style="display:none;">
      <section>
        <h2>ğŸ® Jogos</h2>
        <p style="margin:0; opacity:.85;">
          Em breve: joguinhos em tempo real pra vocÃªs dois ğŸ’œ
        </p>
      </section>
    </div>

    <!-- =====================
         TELA CINEMA
    ====================== -->
    <div id="telaCinema" class="tela" style="display:none;">

      <section class="cardVoltar">
        <button class="btnVoltar" onclick="irPara('home')">â¬…ï¸ Voltar</button>
      </section>

      <section class="cinemaHero">
        <h2>ğŸ¬ Cinema do casal</h2>
        <p style="margin:0; opacity:.85;">
          Filmes e sÃ©ries pra vocÃªs escolherem juntos: lista, favoritos, sorteio, nota e progresso de episÃ³dios ğŸ’œ
        </p>

        <div class="cinemaStats">
          <div class="cinemaStat">
            <div class="cinemaStatNum" id="cinemaCountTodo">0</div>
            <div class="cinemaStatLabel">Quero ver</div>
          </div>
          <div class="cinemaStat">
            <div class="cinemaStatNum" id="cinemaCountWatched">0</div>
            <div class="cinemaStatLabel">Vistos</div>
          </div>
          <div class="cinemaStat">
            <div class="cinemaStatNum" id="cinemaCountFav">0</div>
            <div class="cinemaStatLabel">Favoritos</div>
          </div>
        </div>

        <div class="cinemaLast" id="cinemaLastLine" style="opacity:.78; font-size:13px; margin-top:10px;">
          Ãšltimo visto: â€”
        </div>
      </section>

      <section class="cinemaCompose">
        <h2>Adicionar na lista</h2>

        <div class="cinemaGrid">
          <div class="cinemaField">
            <label for="cinemaTitle">TÃ­tulo</label>
            <input id="cinemaTitle" type="text" placeholder="Ex: Stranger Things / Interestelarâ€¦" />
            <small class="cinemaHint">Dica: pode ser filme ou sÃ©rie.</small>
          </div>

          <div class="cinemaField">
            <label for="cinemaType">Tipo</label>
            <select id="cinemaType" onchange="cinemaOnTypeChange()">
              <option value="movie">Filme</option>
              <option value="series">SÃ©rie</option>
            </select>
            <small class="cinemaHint">Pra organizar melhor ğŸ’œ</small>
          </div>

          <div class="cinemaField">
            <label for="cinemaPlatform">Onde assistir</label>
            <select id="cinemaPlatform">
              <option value="netflix">Netflix</option>
              <option value="prime">Prime Video</option>
              <option value="disney">Disney+</option>
              <option value="max">Max</option>
              <option value="globoplay">Globoplay</option>
              <option value="youtube">YouTube</option>
              <option value="cinema">Cinema</option>
              <option value="outro">Outro</option>
            </select>
            <small class="cinemaHint">VocÃªs podem mudar depois (se quiser eu adiciono ediÃ§Ã£o tambÃ©m).</small>
          </div>

          <div class="cinemaField">
            <label>Capa (URL)</label>
            <input id="cinemaBannerUrl" type="text" placeholder="https://... (opcional)" />
            <small class="cinemaHint">Cole o link do poster/capa (agora funciona em filmes e sÃ©ries).</small>
          </div>

          <!-- CAMPOS SÃ‰RIE -->
          <div class="cinemaField" id="cinemaSeriesSeasonsWrap" style="display:none;">
            <label for="cinemaSeasonsCount">Temporadas</label>
            <input id="cinemaSeasonsCount" type="number" min="1" max="60" placeholder="Ex: 4" />
            <small class="cinemaHint">Quantidade total de temporadas (opcional).</small>
          </div>

          <div class="cinemaField" id="cinemaSeriesEpsWrap" style="display:none;">
            <label for="cinemaEpisodesPerSeason">EpisÃ³dios por temporada</label>
            <input id="cinemaEpisodesPerSeason" type="number" min="1" max="60" placeholder="Ex: 10" />
            <small class="cinemaHint">Mesmo nÃºmero pra todas (opcional). DÃ¡ pra configurar depois.</small>
          </div>

          <div class="cinemaField">
            <label>Sugerido por</label>
            <div class="cinemaPill" id="cinemaMeLabel">VocÃª: â€”</div>
            <small class="cinemaHint">Automaticamente pelo aparelho (Ash/Deh).</small>
          </div>
        </div>

        <div class="cinemaRow">
          <button class="cinemaAddBtn" onclick="cinemaAdd()">â• Adicionar</button>
        </div>
      </section>

      <section class="cinemaRandom">
        <h2>Sorteio</h2>
        <div class="cinemaRandomRow">
          <button class="cinemaDiceBtn" onclick="cinemaPickRandom()">ğŸ² Sortear da lista</button>
          <button class="cinemaGhostBtn" onclick="cinemaClearRandom()">ğŸ§¹ Limpar</button>
        </div>

        <div id="cinemaRandomResult" class="cinemaRandomResult">
          <p style="margin:0; opacity:.75;">Clique em â€œSortearâ€ pra escolher um filme/sÃ©rie da lista ğŸ’œ</p>
        </div>
      </section>

      <section class="cinemaBoard">
        <h2>Minha lista</h2>

        <div class="cinemaTabs">
          <button id="cinemaTabTodo" class="cinemaTab active" onclick="cinemaSetTab('todo')">ğŸ“Œ Quero ver</button>
          <button id="cinemaTabWatched" class="cinemaTab" onclick="cinemaSetTab('watched')">âœ… Vistos</button>
          <button id="cinemaTabFav" class="cinemaTab" onclick="cinemaSetTab('fav')">â­ Favoritos</button>
        </div>

        <div id="cinemaList" class="cinemaList">
          <p style="margin:0; opacity:.75;">Carregandoâ€¦</p>
        </div>
      </section>

      <!-- MODAL DE PROGRESSO DE SÃ‰RIE -->
      <div id="cinemaSeriesModal" class="cinemaModal" style="display:none;" role="dialog" aria-modal="true">
        <div class="cinemaModalBackdrop" onclick="cinemaCloseSeries()"></div>

        <div class="cinemaModalCard">
          <div class="cinemaModalTop">
            <div>
              <strong id="cinemaModalTitle">ğŸ“º SÃ©rie</strong>
              <div id="cinemaModalSub" class="cinemaModalSub">â€”</div>
            </div>
            <button class="cinemaModalClose" onclick="cinemaCloseSeries()">âœ–</button>
          </div>

          <div id="cinemaModalBanner" class="cinemaModalBanner"></div>

          <div class="cinemaModalInfo">
            <div class="cinemaModalNext" id="cinemaModalNext">PrÃ³ximo: â€”</div>
            <div class="cinemaModalBtns">
              <button class="cinemaGhostBtn" onclick="cinemaMarkNextEpisodeFromModal()">â­ï¸ PrÃ³ximo ep</button>
              <button class="cinemaGhostBtn" onclick="cinemaCloseSeries()">Fechar</button>
            </div>
          </div>

          <div id="cinemaModalBody" class="cinemaModalBody">
            <p style="margin:0; opacity:.75;">Carregandoâ€¦</p>
          </div>
        </div>
      </div>

    </div>

  </div>

  <!-- FIREBASE -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

  <!-- SCRIPT -->
  <script src="script.js"></script>
</body>
</html>
